{% extends "blog/base.html" %}
{% block content %}

<!-- ======================= HERO SECTION ======================= -->
<section class="mt-10">
  <div class="relative rounded-xl p-8 overflow-hidden
              bg-gradient-to-b from-[#0b0713] to-[#0b0b10]">

    <!-- Glow Background -->
    <div class="absolute inset-0 pointer-events-none">
      <!-- Main soft purple glow -->
      <div class="absolute -left-40 -top-32 w-[750px] h-[550px] rounded-full blur-[120px] opacity-40"
           style="background: radial-gradient(circle, rgba(140,92,255,0.45), transparent 60%);">
      </div>

      <!-- Extra subtle blue glow -->
      <div class="absolute bottom-0 right-0 w-[350px] h-[250px] rounded-full blur-[100px] opacity-30"
           style="background: radial-gradient(circle, rgba(90,160,255,0.25), transparent 60%);">
      </div>
    </div>

    <div class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-10 items-center">

      <!-- Text -->
      <div class="space-y-4">
        <h1 class="text-[1.85rem] font-light text-white leading-snug">
          Voxa â€” where 
          <span class="bg-gradient-to-r from-purple-400 to-indigo-300 
                       bg-clip-text text-transparent font-medium">
            tech voices connect
          </span>
        </h1>

        <p class="text-[color:var(--voxa-muted)] max-w-md text-[0.9rem] leading-relaxed">
          Share ideas, showcase projects and join thoughtful conversations 
          across the global developer space.
        </p>

        <div class="flex gap-3 pt-1">
          <a href="{% url 'post-create' %}"
             class="px-5 py-2.5 bg-[color:var(--voxa-accent)] text-black 
                    rounded-md font-medium text-xs md:text-sm
                    hover:opacity-90 transition">
             Create post
          </a>
          <a href="{% url 'blog-home' %}"
             class="px-5 py-2.5 border border-gray-700 
                    text-[color:var(--voxa-muted)] rounded-md 
                    text-xs md:text-sm
                    hover:text-white hover:border-gray-500 transition">
             Explore feed
          </a>
        </div>
      </div>


      <!-- FEATURED POST (Glassmorphic card) -->
      <div>
        <div class="rounded-xl overflow-hidden backdrop-blur-md 
                    bg-white/5 border border-white/10
                    shadow-[0_0_25px_rgba(255,255,255,0.05)]
                    hover:shadow-[0_0_35px_rgba(255,255,255,0.08)]
                    transition-all">

          {% if featured_post %}
            {% if featured_post.image %}
              <img src="{{ featured_post.image.url }}" 
                   class="w-full h-32 object-cover opacity-95" 
                   alt="{{ featured_post.title }}">
            {% endif %}

            <div class="p-4">
              <h3 class="text-sm md:text-base font-semibold text-white leading-tight">
                {{ featured_post.title }}
              </h3>

              <p class="text-[color:var(--voxa-muted)] mt-1.5 text-xs md:text-sm line-clamp-2">
                {{ featured_post.content|truncatewords:16 }}
              </p>

              <a href="{% url 'post-detail' featured_post.id %}"
                 class="inline-block mt-3 px-3 py-1.5 
                        bg-[color:var(--voxa-accent)] text-black 
                        rounded-md text-xs font-medium">
                 Read
              </a>
            </div>

          {% else %}
            <div class="h-36 flex items-center justify-center 
                        text-[color:var(--voxa-muted)] text-sm">
              Featured post will appear here.
            </div>
          {% endif %}
        </div>
      </div>

    </div>
  </div>
</section>



<!-- ======================= DEV.TO ARTICLES ======================= -->
<section class="mt-12">
  <h3 class="text-lg font-semibold text-white mb-3">Tech articles from Dev.to</h3>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
    {% for article in external_articles %}
    <div class="bg-[color:var(--voxa-surface)] border border-gray-800 rounded-lg p-4 hover:scale-[1.01] transition">
      {% if article.cover_image %}
        <img src="{{ article.cover_image }}" class="w-full h-32 object-cover rounded-md mb-3">
      {% endif %}

      <h2 class="text-base font-semibold text-white leading-snug">{{ article.title }}</h2>

      <p class="text-[color:var(--voxa-muted)] mt-1.5 text-xs leading-relaxed">
        {{ article.description|truncatechars:120 }}
      </p>

      <div class="flex items-center gap-2 mt-3">
        <img src="{{ article.user.profile_image }}" class="w-7 h-7 rounded-full">
        <span class="text-[color:var(--voxa-muted)] text-xs">{{ article.user.name }}</span>
      </div>

      <a href="{{ article.url }}" target="_blank"
         class="mt-2 inline-block text-blue-500 hover:underline text-xs">
        Read on Dev.to â†’
      </a>
    </div>

    {% empty %}
      <p class="text-[color:var(--voxa-muted)]">No Dev.to articles available.</p>
    {% endfor %}
  </div>
</section>



<!-- ======================= TRENDING TAGS ======================= -->
<section class="mt-12">
  <h4 class="text-lg font-semibold text-white mb-3">ðŸ”¥ Trending Topics</h4>

  <div class="flex gap-2 overflow-x-auto pb-2">
    {% for tag in trending_tags %}
      <span class="px-3 py-1.5 bg-[color:var(--voxa-accent)] text-black rounded-full text-xs font-medium whitespace-nowrap">
        #{{ tag }}
      </span>
    {% empty %}
      <span class="text-[color:var(--voxa-muted)] text-sm">No trending topics yet.</span>
    {% endfor %}
  </div>
</section>



<!-- ======================= MISSION / ABOUT ======================= -->
<section class="mt-14">
  <div class="bg-[color:var(--voxa-surface)] border border-gray-800 rounded-xl p-7">
    <div class="grid md:grid-cols-3 gap-6">

      <!-- Mission text -->
      <div class="md:col-span-2">
        <h2 class="text-xl font-semibold text-white">Our mission</h2>
        <p class="text-[color:var(--voxa-muted)] mt-3 text-sm leading-relaxed">
          Voxa empowers developers to share insights, explore new ideas, and connect with others.
        </p>
      </div>

      <!-- Highlights -->
      <ul class="space-y-4">
        <li class="flex gap-3">
          <div class="w-9 h-9 rounded-md bg-[color:var(--voxa-accent)] flex items-center justify-center text-black text-sm font-bold">â˜…</div>
          <div>
            <p class="text-white font-medium text-sm">Curated content</p>
            <p class="text-xs text-[color:var(--voxa-muted)]">Quality posts & ideas</p>
          </div>
        </li>

        <li class="flex gap-3">
          <div class="w-9 h-9 rounded-md bg-purple-500 flex items-center justify-center text-white text-sm font-bold">âš¡</div>
          <div>
            <p class="text-white font-medium text-sm">Fast discovery</p>
            <p class="text-xs text-[color:var(--voxa-muted)]">Find trending topics quickly</p>
          </div>
        </li>
      </ul>

    </div>
  </div>
</section>



<!-- ======================= FEATURED POSTS ======================= -->
<section class="mt-14">
  <h3 class="text-lg font-semibold text-white mb-4">Featured posts</h3>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
    {% for post in posts|slice:":6" %}
    <article class="bg-[color:var(--voxa-surface)] border border-gray-800 rounded-lg overflow-hidden hover:scale-[1.01] transition">
      {% if post.image %}
        <img src="{{ post.image.url }}" class="w-full h-36 object-cover">
      {% else %}
        <div class="h-36 bg-gray-900 flex items-center justify-center text-[color:var(--voxa-muted)] text-xs">No image</div>
      {% endif %}

      <div class="p-3">
        <a href="{% url 'post-detail' post.id %}"
           class="text-base font-medium text-white hover:text-[color:var(--voxa-accent)] leading-tight">
           {{ post.title }}
        </a>

        <p class="text-[color:var(--voxa-muted)] text-xs mt-1.5">
          {{ post.content|truncatewords:16 }}
        </p>

        <div class="flex justify-between items-center mt-3 text-[color:var(--voxa-muted)] text-xs">
          <div class="flex items-center gap-2">
            <img src="{{ post.author.profile.image.url }}" class="w-6 h-6 rounded-full object-cover border">
            <span>{{ post.author }}</span>
          </div>
          <span>{{ post.date_posted|date:"M d" }}</span>
        </div>
      </div>
    </article>

    {% empty %}
      <p class="text-[color:var(--voxa-muted)]">No posts available.</p>
    {% endfor %}
  </div>
</section>



<!-- ======================= FEATURED AUTHORS ======================= -->
<section class="mt-14 mb-10">
  <h3 class="text-lg font-semibold text-white mb-3">Top contributors</h3>

  <div class="flex gap-3 overflow-x-auto pb-2">
    {% for user in featured_users|slice:":8" %}
    <div class="min-w-[160px] bg-[color:var(--voxa-surface)] border border-gray-800 p-3 rounded-lg hover:scale-[1.03] transition">
      <div class="flex items-center gap-2">
        <img src="{{ user.profile.image.url }}" class="w-10 h-10 rounded-full object-cover border">
        <div>
          <a href="{% url 'user-posts' user.username %}"
             class="font-medium text-sm hover:text-[color:var(--voxa-accent)]">
            {{ user.username }}
          </a>
          <p class="text-xs text-[color:var(--voxa-muted)]">{{ user.post_set.count }} posts</p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

{% endblock %}
